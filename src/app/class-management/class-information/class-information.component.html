<h3>Create Class</h3>

<mat-tab-group mat-align-tabs="start">
  <mat-tab label="Information">
    <form [formGroup]="addClassFrom" (ngSubmit)="onSubmit(addClassFrom.value)">
      <ng-container *ngTemplateOutlet="information"> </ng-container>
      <ng-container
        [ngTemplateOutlet]="isUpdateClass ? buttonUpdate : buttonAdd"
      >
      </ng-container>
    </form>
  </mat-tab>
  <mat-tab label="Trainee">Trainee</mat-tab>
</mat-tab-group>

<ng-template #buttonAdd>
  <button mat-stroked-button type="submit" mat-raised-button color="primary">
    Submit
  </button>
  <button mat-stroked-button type="reset" (click)="toggleIsCreateClass.emit()">
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="reply_icon"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Close
  </button>
</ng-template>

<ng-template #buttonUpdate>
  <button mat-stroked-button type="submit">
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="arrow_circle_up"
      [ngStyle]="{ color: 'green' }"
    >
    </mat-icon>
    Update Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="turn_left"
      [ngStyle]="{ color: 'blue', transform: 'rotate(90deg)' }"
    >
    </mat-icon>
    Submit Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="play_arrow"
      [ngStyle]="{ color: 'blue' }"
    >
    </mat-icon>
    Start Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="indeterminate_check_box"
      [ngStyle]="{ color: 'blue' }"
    >
    </mat-icon>
    Finish Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="reply"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Close
  </button>

  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="do_disturb"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Cancle Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="thumb_up"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Approve Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="thumb_down_alt"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Reject Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="remove_circle"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Close Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="question_mark"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Request Info
  </button>

  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="thumb_up_off_alt"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Accept Class
  </button>
  <button mat-stroked-button>
    <mat-icon
      aria-hidden="false"
      aria-label="Search icon"
      fontIcon="thumb_down_off_alt"
      [ngStyle]="{ color: 'red' }"
    >
    </mat-icon>
    Decline Class
  </button>
</ng-template>

<ng-template #information>
  <div style="margin: 10px">
    <ng-container *ngTemplateOutlet="general"> </ng-container>
    <ng-container *ngTemplateOutlet="detail"> </ng-container>
    <ng-container *ngTemplateOutlet="budget"> </ng-container>
    <ng-container *ngTemplateOutlet="audit"> </ng-container>
  </div>
</ng-template>

<ng-template #general>
  <form [formGroup]="addClassFrom">
    <fieldset formGroupName="general">
      <div class="flex-container header">
        <mat-icon
          aria-hidden="false"
          aria-label="Search icon"
          fontIcon="arrow_drop_down"
        ></mat-icon>
        <p>General</p>
      </div>
      <div class="flex-container">
        <p>Class Code</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="classCode"
          />
        </mat-form-field>

        <p>Class Name</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="className"
          />
        </mat-form-field>

        <p>Status</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="status"
          />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Planned Trainee No</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            formControlName="plannedTraineeNo"
            type="number"
          />
        </mat-form-field>

        <p>Accepted Trainee No</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="acceptedTraineeNo"
          />
        </mat-form-field>

        <p>Actual Trainee No</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="actualTraineeNo"
          />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Expected Start Date *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            [matDatepicker]="expectedStartDate"
            formControlName="expectedStartDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="expectedStartDate"
          ></mat-datepicker-toggle>
          <mat-datepicker #expectedStartDate></mat-datepicker>
        </mat-form-field>

        <p>Expected End Date *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            [matDatepicker]="expectedEndDate"
            formControlName="expectedEndDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="expectedEndDate"
          ></mat-datepicker-toggle>
          <mat-datepicker #expectedEndDate></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Location *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="locationID">
            <mat-option
              *ngFor="let data of locationList | async"
              [value]="data.id"
            >
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Detailed Location</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            formControlName="detailedLocation"
          />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Bubget Code *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="budgetCode">
            <mat-option *ngFor="let data of budgetCodeList" [value]="data.id">
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Estimated Bubget *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            formControlName="estimatedBudget"
          />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Class Admin *</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select [formControl]="classAdmin" multiple>
            <mat-select-trigger>
              {{classAdmin.value?.[0] || ''}}
              <span *ngIf="(classAdmin.value?.length || 0) > 1">
                (+{{ (classAdmin.value?.length || 0) - 1 }}
                {{ classAdmin.value?.length === 2 ? "other" : "others" }})
              </span>
            </mat-select-trigger>
            <mat-option *ngFor="let data of classAdminList" [value]="data">{{
              data
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <p>Learning Path *</p>
        <div>
          <input
            id="file"
            type="file"
            class="form-control"
            (change)="onFileChange($event)"
            required
          />
        </div>
      </div>
      <div class="flex-container">
        <p style="width: 20%">History</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            placeholder=""
            value=""
            readonly
            formControlName="history"
          />
        </mat-form-field>
      </div>
    </fieldset>
  </form>
</ng-template>

<ng-template #detail>
  <form [formGroup]="addClassFrom">
    <fieldset formGroupName="detail">
      <div class="flex-container header">
        <mat-icon
          aria-hidden="false"
          aria-label="Search icon"
          fontIcon="arrow_drop_down"
        ></mat-icon>
        <p>Detail</p>
      </div>

      <div class="flex-container">
        <p>Subject Type</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="subjectType">
            <mat-option *ngFor="let data of subjectTypeList" [value]="data.id">
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Sub-Subject Type</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="subSubjectType">
            <mat-option
              *ngFor="let data of subSubjectTypeList"
              [value]="data.id"
            >
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Delivery Type</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="deliveryType">
            <mat-option *ngFor="let data of deliveryTypeList" [value]="data.id">
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="flex-container">
        <p>Format Type</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="formatType">
            <mat-option *ngFor="let data of formatTypeList" [value]="data.id">
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Scope</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="scope">
            <mat-option *ngFor="let data of scopeList" [value]="data.id">
              {{ data.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Supplier / Partner</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input matInput placeholder="" value="" formControlName="supplier" />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Actual Start Date</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            [matDatepicker]="actualStartDate"
            formControlName="actualStartDate"
            readonly
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="actualStartDate"
            [disabled]="true"
          ></mat-datepicker-toggle>
          <mat-datepicker #actualStartDate></mat-datepicker>
        </mat-form-field>

        <p>Actual End Date</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input
            matInput
            [matDatepicker]="actualEndDate"
            formControlName="actualEndDate"
            readonly
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="actualEndDate"
            [disabled]="true"
          ></mat-datepicker-toggle>
          <mat-datepicker #actualEndDate></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Master Trainer</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <mat-select matNativeControl formControlName="masterTrainer">
            <mat-option *ngFor="let data of scopeList" [value]="data">
              {{ data }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <p>Trainer</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input matInput placeholder="" value="" formControlName="trainer" />
        </mat-form-field>
      </div>
      <div class="flex-container">
        <p>Curriculumn</p>
        <div>
          <button mat-stroked-button>
            <mat-icon
              aria-hidden="false"
              aria-label="Search icon"
              fontIcon="arrow_circle_up"
              [ngStyle]="{ color: 'blue' }"
            ></mat-icon>
            Curriculumn
          </button>
        </div>

        <p>Remarks</p>
        <mat-form-field appearance="outline" [hideRequiredMarker]="true">
          <mat-label></mat-label>
          <input matInput placeholder="" value="" formControlName="remarks" />
        </mat-form-field>
      </div>
    </fieldset>
  </form>
</ng-template>

<ng-template #budget>
  <form [formGroup]="addClassFrom">
    <div class="flex-container header">
      <mat-icon
        aria-hidden="false"
        aria-label="Search icon"
        fontIcon="arrow_drop_down"
      ></mat-icon>
      <p>Budget</p>
    </div>
    <div class="flex-container">
      <p>Total</p>
      <mat-form-field appearance="outline" [hideRequiredMarker]="true">
        <mat-label></mat-label>
        <input matInput placeholder="" value="" />
      </mat-form-field>
      <p>Over Budget</p>
      <mat-form-field appearance="outline" [hideRequiredMarker]="true">
        <mat-label></mat-label>
        <input matInput placeholder="" value="" />
      </mat-form-field>
    </div>

    <table #budgetTable mat-table [dataSource]="budgetData">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="add">
        <th mat-header-cell *matHeaderCellDef>
          <button mat-button (click)="addBudgetData()">
            <mat-icon
              aria-hidden="false"
              aria-label="Search icon"
              fontIcon="add_circle"
              [ngStyle]="{ color: 'green' }"
            >
            </mat-icon>
          </button>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <button mat-button (click)="removeBudgetData(i)">
            <mat-icon
              aria-hidden="false"
              aria-label="Search icon"
              fontIcon="delete"
              [ngStyle]="{ color: 'red' }"
            >
            </mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="item">
        <th mat-header-cell *matHeaderCellDef>Item</th>
        <td mat-cell *matCellDef="let element">{{ element.item }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="unit">
        <th mat-header-cell *matHeaderCellDef>Unit</th>
        <td mat-cell *matCellDef="let element">{{ element.unit }}</td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="unitExpense">
        <th mat-header-cell *matHeaderCellDef>Unit Expense</th>
        <td mat-cell *matCellDef="let element">{{ element.unitExpense }}</td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="quality">
        <th mat-header-cell *matHeaderCellDef>Quality</th>
        <td mat-cell *matCellDef="let element">{{ element.quality }}</td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
      </ng-container>

      <ng-container matColumnDef="tax">
        <th mat-header-cell *matHeaderCellDef>Tax</th>
        <td mat-cell *matCellDef="let element">{{ element.tax }}</td>
      </ng-container>

      <ng-container matColumnDef="sum">
        <th mat-header-cell *matHeaderCellDef>Sum</th>
        <td mat-cell *matCellDef="let element">{{ element.sum }}</td>
      </ng-container>

      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef>Note</th>
        <td mat-cell *matCellDef="let element">{{ element.note }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="budgetDisplayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: budgetDisplayedColumns"></tr>
    </table>
  </form>
</ng-template>

<ng-template #audit>
  <form [formGroup]="addClassFrom">
    <div class="flex-container header">
      <mat-icon
        aria-hidden="false"
        aria-label="Search icon"
        fontIcon="arrow_drop_down"
      ></mat-icon>
      <p>Audit</p>
    </div>

    <table #auditTable mat-table [dataSource]="auditData">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="add">
        <th mat-header-cell *matHeaderCellDef>
          <button mat-button (click)="addAuditData()">
            <mat-icon
              aria-hidden="false"
              aria-label="Search icon"
              fontIcon="add_circle"
              [ngStyle]="{ color: 'green' }"
            >
            </mat-icon>
          </button>
        </th>
        <td mat-cell *matCellDef="let element; let i = index">
          <button mat-button (click)="removeAuditData(i)">
            <mat-icon
              aria-hidden="false"
              aria-label="Search icon"
              fontIcon="delete"
              [ngStyle]="{ color: 'red' }"
            >
            </mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let element">{{ element.date }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="eventCategory">
        <th mat-header-cell *matHeaderCellDef>Event Category</th>
        <td mat-cell *matCellDef="let element">{{ element.eventCategory }}</td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="relatedPeople">
        <th mat-header-cell *matHeaderCellDef>Related People</th>
        <td mat-cell *matCellDef="let element">{{ element.relatedPeople }}</td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">{{ element.action }}</td>
      </ng-container>

      <ng-container matColumnDef="pic">
        <th mat-header-cell *matHeaderCellDef>PIC</th>
        <td mat-cell *matCellDef="let element">{{ element.pic }}</td>
      </ng-container>

      <ng-container matColumnDef="deadline">
        <th mat-header-cell *matHeaderCellDef>Deadline</th>
        <td mat-cell *matCellDef="let element">{{ element.deadline }}</td>
      </ng-container>

      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef>Note</th>
        <td mat-cell *matCellDef="let element">{{ element.note }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="auditDisplayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: auditDisplayedColumns"></tr>
    </table>
  </form>
</ng-template>

<ng-template #audit> </ng-template>
